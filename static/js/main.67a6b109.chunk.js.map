{"version":3,"sources":["types/index.ts","components/Button/Button.tsx","images/bomb.gif","images/flag.png","components/NumberDisplay/NumberDisplay.tsx","utils/index.ts","constants/index.ts","components/Game/Game.tsx","components/App/App.tsx","index.tsx"],"names":["GamePhase","CellValue","CellState","Face","ActionType","Button","row","col","value","state","onClickHandler","onContextMenuHandler","className","bomb","discovered","flagged","onClick","onContextMenu","src","alt","none","toString","undiscovered","renderContent","NumberDisplay","displayNumber","displayString","padStart","generateNeighborIndices","cellIndex","filter","index","generateCells","notBombIndex","cells","Array","fill","map","_","i","bombCount","rowIndex","Math","floor","random","colIndex","isOrIsAdjacentToUsersFirstClick","abs","cell","preSumArr","reduce","acc","curr","bfsDiscover","i2D","frontier","visited","Set","push","add","length","currI2D","pop","console","log","undefined","forEach","has","currCell","reducer","action","newCellState","type","DISCOVER","FLAG","UNFLAG","newState","gamePhase","STATUS_CLICK","playing","won","lost","apriori","INIT","FIRST_CLICK","BFS_REVEAL","allNonBombsDiscovered","anyCellDiscovered","anyBombDiscovered","getGamePhaseFromCells","Game","updateGameRecord","useReducer","cellDispatch","useState","time","setTime","useEffect","interval","setInterval","min","clearInterval","status","handleCellClick","rowParam","colParam","handleCellContext","e","preventDefault","message","App","setGameRecord","gameRecord","prev","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.67a6b109.chunk.js","sourcesContent":["export enum GamePhase {\r\n  apriori,\r\n  playing,\r\n  won,\r\n  lost,\r\n}\r\n\r\nexport enum CellValue {\r\n  none  ,\r\n  one   ,\r\n  two   ,\r\n  three ,\r\n  four  ,\r\n  five  ,\r\n  six   ,\r\n  seven ,\r\n  eight ,\r\n  bomb\r\n}\r\n\r\nexport enum CellState {\r\n  undiscovered,\r\n  discovered  ,\r\n  flagged\r\n}\r\n\r\nexport enum Face {\r\n  glad = '😁',\r\n  hesitant = '😶',\r\n  lost = '💀',\r\n  won = '😎'\r\n}\r\n\r\nexport enum ActionType {\r\n  INIT,\r\n  FIRST_CLICK,\r\n  BFS_REVEAL,\r\n  DISCOVER,\r\n  FLAG,\r\n  UNFLAG,\r\n  STATUS_CLICK\r\n}\r\n\r\nexport type Action =\r\n  | { type: ActionType.STATUS_CLICK; }\r\n  | { type: ActionType.INIT; }\r\n  | { type: ActionType.FIRST_CLICK; i2D: Index2D }\r\n  | { type: ActionType.BFS_REVEAL; i2D: Index2D }\r\n  | { type: ActionType.DISCOVER; i2D: Index2D }\r\n  | { type: ActionType.FLAG; i2D: Index2D }\r\n  | { type: ActionType.UNFLAG; i2D: Index2D  }\r\n\r\nexport type GameRecord = {status: GamePhase, time: number}\r\n\r\nexport type Cell = { value: CellValue, state: CellState }\r\n\r\nexport type Index2D = [ row: number, col: number ]","import React from \"react\";\r\nimport { CellState, CellValue } from '../../types';\r\nimport flagImg from '../../images/flag.png';\r\nimport bombImg from '../../images/bomb.gif';\r\nimport './Button.scss';\r\n\r\ninterface ButtonProps {\r\n  row: number;\r\n  col: number;\r\n  value: CellValue;\r\n  state: CellState;\r\n  onClickHandler(rowParam: number, colParam: number) : (...args: any) => void;\r\n  onContextMenuHandler(rowParam: number, colParam: number) : (...args: any) => void;\r\n}\r\n\r\nfunction Button({row, col, value, state, onClickHandler, onContextMenuHandler}: ButtonProps) {\r\n  const renderContent = (): React.ReactNode => {\r\n    switch(state) {\r\n      case CellState.discovered:\r\n        if(value === CellValue.bomb) {\r\n          return <img src={bombImg} alt=\"nuclear radiation symbol\"/>\r\n          // return <span role=\"img\" aria-label=\"bomb\">💣</span>\r\n        } else if (value < CellValue.bomb && value > CellValue.none){\r\n          return <span className={CellValue[value].toString()}>{value}</span>\r\n        }\r\n        break;\r\n      case CellState.flagged:\r\n        return <img src={flagImg} alt=\"nuclear radiation flag\"/>\r\n      case CellState.undiscovered:\r\n        break;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={`Button ${value===CellValue.bomb ? \"bomb\" : \"\"} ${state===CellState.discovered ? \"discovered\" : state===CellState.flagged ? \"flagged\" : \"undiscovered\"}`}\r\n      onClick={onClickHandler(row, col)}\r\n      onContextMenu={onContextMenuHandler(row, col)}>\r\n      {renderContent()}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Button;","export default \"data:image/gif;base64,R0lGODdhMgAyAHcAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJFgAAACwAAAAAMgAyAIEAAAD/YQAREUQAAAAC/4SPqcvtj4KcFFpIsw63Gy2E4qh5DzWmqlCZCrrG5OQek4yntHvnfrjrSH5EkUQY0CWLwKWRg3E2h0XY80SdZn+ZGZSx3RDFV7B0I8WhZ4seC51ewZ1B23muxpcj9HncC7f3cecX4xf2BZB1uAWo98b3xKjCuPiFOKmU2TQoeWhYWWb5qeX5eKTYRwryRgqZarqmNXoK1TjWxcQJq9vqxoR6iyvMZfvXixx8jKyLygucCx0JzVqVSCwja52ATRmI+7Lsre3jbCceW52XaFe+mc0+De8K6vCr+a6JNZ/PFiVX6d4uC7cCCjRHsGC/OkiOkfNSY1C3dfF4CKQYsU00gA0tMpqp5LHhhpAkQxYAACH5BAkWAAAALAEAAQAwADAAgQAAAP9hABERRAAAAAL/hI+Jwe0Ko0yu2jBztKL7b2mi85Wm8Ihbc7Zlqh6sS4NMbMw06TYxU/NcAq2bBhjsDIknowSZRC2ZL8yKmpxChU4KNqv9SiHbaFintMrK4HNVDWC33bYFE707l53QSlAvNhZH5VdD12SFtNQzZYjR11jEMcelxRh4SXjIE2WjqJfG2Sn1STc5SnoHmir3N7PKiulYGlkpO6u5uIOaaluYeWtyQyv6duqYo1osXMuYXDk3hPyM0glbZccLKNaF53pN6oUKyEwWbGxZZ37uK/32xB7anJbRyqyLfcSOnz9iL+8tFI5B8fLA+RFwzkAv/+4dXJhsmScfEOHpqYhwCMQCACH5BAkWAAAALAEAAQAwADAAgQAAAP9hABERRAAAAAL/hI+Jwe0Ko0yu2jBztKL7b2mi85Wm8Ihbc7Zlqh5sy9FMbMzgVe+YyjDxhgHhLxM0Ens7ZNG21Bkl0le06lu5Oten66ZIbrtb7jEnHi/L5nO6TGR7wGh5+2JHHd9sXt5c9+cn+MPXV/EHaJjIeNf4aLV4KAmHJceUR8KIaaepF3WXdOXj1VXEQTanY+r4uaYqZuoFC0pL+no7ZAUQm5o7CMhb6ksbpxoYChyp24TsqvyLeCwzi3tiPI1WDX2t3ECxzdmNSbcQbgnlqbdyPltZ9a3lk4hVDvHm3jmlQfloP4Fu0z8n+QSeiaGO0ECEAccdxGEu4bKFECNeqQiRCMYCACH5BAkWAAAALAEAAQAwADAAgQAAAP9hABERRAAAAAL/hI+Jwe0Ko0yu2jBztKL7b2mi85Wm8Ihbc7Zlqh7sy7koExuzdzF214j5QL3h7zYKEIvGI27SvDGVRx5mRZVOs9UgpLndVZEKcDjavcrM5/FywbVu3US4az7OPgFoWjHN9dRn8mdTQzZIeHG3CISR2ALp2DgZRxfJtGSZJxYmt+lUUZlZeTlK1VZqWpOqZao11EryOnt66PrKWKgKCKopasXn+wmMeSg4PBXaeTXoCVinE3c2TBi89qtMqyasR73NLZy9S7dnZ9uzGr4WiOfm9TWt/b5OIU8emqRIma8iBvvPWI5uxqpJGShNkq56QgIagocQTq0TISJKoMbQYrweAxELAAA7\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAYxJREFUWIXVmd0VgyAMhYOnC9SZGKArdDJXcIDO1BXsUywCkfyJep88ReLnDWAJARRa3rDg9ThHVp/v67NehwmC9JmiDgjIhaOE0BJg1o1egLkkwM0bljcs3oC5vq9PE3a3sQckqgVLNuSQmCYv8Fq8PdjqjxQkymsy1eJRsIMU8gilzxjnuFn+UBtyCaTWVW7M3NnV0TOczLXnbJH6vAMnqAZEes8AoF+GJLCaF0tdLRw9I+UchsG6qB81TFDo6sbRK7iJylmqk8kalNsm0dDrW27ROMe/o9ZxpGlrKWV6qKNUQKhv+DhH8xBwGaMA9Yx4Tk4TqCSt1rmwpr7HpLI8wy31R8sNtOaWZ5bC8xmLP6lX1G1SH7x2mtRS5BX7Pt96lygdFABshQauY5b4YYJwL0cBdK5Kx58mPm6Z1Y4etQultIKGCcLVtiJpAaKo8XCGgPWFOPHz+lOR+rOdpYpk7LJjGshDVGyq7EhOpt7Oqgu5KG9npU6iXA4bWtCtfi6HDakuf3yT64wDsR/EDf174470vAAAAABJRU5ErkJggg==\"","import React from 'react';\r\n\r\nimport \"./NumberDisplay.scss\";\r\n\r\ninterface NumberDisplayProps {\r\n  displayNumber: number;\r\n}\r\n\r\nfunction NumberDisplay({displayNumber}: NumberDisplayProps) {\r\n  let displayString = displayNumber.toString().padStart(3, \"0\");\r\n  if(displayNumber < 0){\r\n    displayString = \"-\" + (displayNumber*-1).toString().padStart(2, \"0\");\r\n  }\r\n  return <div className=\"NumberDisplay\">{displayString}</div>\r\n}\r\n\r\nexport default NumberDisplay;","import { elementRoles } from 'aria-query';\r\nimport {MAX_COLS, MAX_ROWS, BOMB_COUNT} from \"../constants\";\r\nimport {CellValue, CellState, Cell, Index2D, GamePhase} from \"../types\";\r\n\r\nexport const generateNeighborIndices = (cellIndex: Index2D) : Index2D[] => {\r\n  const neighborIndices : Index2D[] = [\r\n        [cellIndex[0]-1, cellIndex[1]-1],\r\n        [cellIndex[0]-1, cellIndex[1]  ],\r\n        [cellIndex[0]-1, cellIndex[1]+1],\r\n        [cellIndex[0]  , cellIndex[1]-1],\r\n        [cellIndex[0]  , cellIndex[1]+1],\r\n        [cellIndex[0]+1, cellIndex[1]-1],\r\n        [cellIndex[0]+1, cellIndex[1]  ],\r\n        [cellIndex[0]+1, cellIndex[1]+1]\r\n      ];\r\n  return neighborIndices.filter(index => index[0] >= 0 && index[0] < MAX_ROWS && index[1] >= 0 && index[1] < MAX_COLS);\r\n}\r\n\r\nexport const generateCells = (notBombIndex? : Index2D) : Cell[][] => {\r\n  let cells = new Array(MAX_ROWS).fill(null).map(_ => {\r\n    return new Array(MAX_COLS).fill(null).map((_, i) => {\r\n      return {\r\n        value: CellValue.none,\r\n        state: CellState.undiscovered\r\n      }\r\n    })\r\n  });\r\n\r\n  // place 10 bombs randomly, but not at or around where the user first clicks\r\n  let bombCount = BOMB_COUNT;\r\n  while(bombCount > 0){\r\n    const rowIndex = Math.floor(Math.random()*MAX_ROWS);\r\n    const colIndex = Math.floor(Math.random()*MAX_COLS);\r\n    let isOrIsAdjacentToUsersFirstClick = false;\r\n    if(notBombIndex){\r\n      isOrIsAdjacentToUsersFirstClick = (notBombIndex\r\n        && ([rowIndex, colIndex] === notBombIndex\r\n          || Math.abs(rowIndex-notBombIndex[0]) <= 1\r\n          || Math.abs(colIndex - notBombIndex[1]) <= 1))\r\n    }\r\n    if(!(cells[rowIndex][colIndex].value === CellValue.bomb || isOrIsAdjacentToUsersFirstClick)){\r\n      cells[rowIndex][colIndex].value = CellValue.bomb;\r\n      bombCount--;\r\n    }\r\n  }\r\n\r\n  cells = cells.map((row, rowIndex) => {\r\n    return row.map((cell, colIndex) => {\r\n      let neighborCells = generateNeighborIndices([rowIndex, colIndex])\r\n\r\n      const preSumArr : number[] = neighborCells.map((index) => {\r\n        return cells[index[0]][index[1]].value === CellValue.bomb ? 1 : 0;\r\n      })\r\n\r\n      return cell.value === CellValue.bomb ? cell : {value: preSumArr.reduce( (acc, curr) =>  acc + curr, 0), state: cell.state};\r\n    })\r\n  })\r\n\r\n  if(notBombIndex) {\r\n    return bfsDiscover(cells, notBombIndex);\r\n  } else {\r\n    return cells;\r\n  }\r\n}\r\n\r\nexport const bfsDiscover = (cells: Cell[][], i2D: Index2D): Cell[][] => {\r\n  const frontier : Array<Index2D> = new Array<Index2D>();\r\n  const visited : Set<number> = new Set<number>();\r\n\r\n  frontier.push(i2D);\r\n  visited.add(i2D[0]*MAX_COLS + i2D[1]);\r\n\r\n  while(frontier.length > 0){\r\n    const currI2D = frontier.pop();\r\n    console.log(currI2D);\r\n    console.log(frontier.length);\r\n    let neighborIndices : Index2D[];\r\n    if(currI2D !== undefined){\r\n      neighborIndices = generateNeighborIndices(currI2D);\r\n      neighborIndices.forEach((i2D: Index2D) => {\r\n        if(!visited.has(i2D[0]*MAX_COLS+i2D[1])){\r\n          if(cells[i2D[0]][i2D[1]].value !== CellValue.bomb){\r\n            visited.add(i2D[0]*MAX_COLS+i2D[1]);\r\n            if(cells[i2D[0]][i2D[1]].value === CellValue.none)\r\n              frontier.push(i2D);\r\n          }\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  return cells.map((row, rowIndex) => {\r\n    return row.map((currCell, colIndex) => {\r\n      if(visited.has(rowIndex*MAX_COLS+colIndex)) {\r\n        return {...currCell, state: CellState.discovered}\r\n      } else {\r\n        return currCell;\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport function getGamePhaseFromCells(cells: Cell[][]) : GamePhase {\r\n  let allNonBombsDiscovered = true; // -> playing : won\r\n  let anyCellDiscovered = false; // -> playing\r\n  let anyBombDiscovered = false; // -> lost\r\n\r\n  cells.forEach((row) => {\r\n    row.forEach((cell) => {\r\n      if(cell.value !== CellValue.bomb && cell.state !== CellState.discovered) {\r\n        allNonBombsDiscovered = false;\r\n      } else if (cell.state === CellState.discovered) {\r\n        anyCellDiscovered = true;\r\n        if(cell.value === CellValue.bomb) {\r\n          anyBombDiscovered = true;\r\n        }\r\n      }\r\n    })\r\n  })\r\n\r\n  if(anyBombDiscovered)\r\n    return GamePhase.lost;\r\n  if(allNonBombsDiscovered)\r\n    return GamePhase.won;\r\n  if(anyCellDiscovered)\r\n    return GamePhase.playing;\r\n  return GamePhase.apriori;\r\n}\r\n","export const MAX_ROWS = 9;\r\nexport const MAX_COLS = 9;\r\nexport const BOMB_COUNT = 10;","import React, {useEffect, useState, useReducer} from 'react';\r\nimport {Cell, CellValue, CellState, Action, ActionType, GamePhase, GameRecord} from \"../../types\"\r\n\r\nimport Button from '../Button/Button';\r\nimport NumberDisplay from '../NumberDisplay/NumberDisplay';\r\nimport { generateCells, bfsDiscover, getGamePhaseFromCells } from '../../utils';\r\n\r\nimport './Game.scss';\r\nimport { BOMB_COUNT } from '../../constants';\r\n\r\nfunction reducer(state: {cells: Cell[][], gamePhase: GamePhase}, action: Action): {cells: Cell[][], gamePhase: GamePhase} {\r\n  const newCellState = action.type === ActionType.DISCOVER ? CellState.discovered :\r\n                   action.type === ActionType.FLAG ? CellState.flagged :\r\n                   action.type === ActionType.UNFLAG ? CellState.undiscovered : CellState.undiscovered;\r\n\r\n  let newState = {\r\n    cells: state.cells,\r\n    gamePhase: state.gamePhase\r\n  };\r\n\r\n  switch(action.type){\r\n    case ActionType.STATUS_CLICK:\r\n      return {\r\n        cells: (state.gamePhase === GamePhase.playing) ? state.cells : generateCells(),\r\n        gamePhase: (state.gamePhase === GamePhase.won || state.gamePhase === GamePhase.lost) ? GamePhase.apriori : GamePhase.playing\r\n      }\r\n    case ActionType.INIT:\r\n      return {\r\n        cells: generateCells(),\r\n        gamePhase: GamePhase.apriori\r\n      };\r\n    case ActionType.FIRST_CLICK:\r\n      newState.cells = generateCells(action.i2D);\r\n      break;\r\n    case ActionType.BFS_REVEAL:\r\n      newState.cells = bfsDiscover(state.cells, action.i2D);\r\n      break;\r\n    case ActionType.DISCOVER:\r\n    case ActionType.FLAG:\r\n    case ActionType.UNFLAG:\r\n      newState.cells = state.cells.map((row, rowIndex) => {\r\n        return row.map((currCell, colIndex) => {\r\n          return (action.i2D[0] === rowIndex && action.i2D[1] === colIndex) ? {...currCell, state: newCellState} : currCell;\r\n        })\r\n      })\r\n      break;\r\n  }\r\n\r\n  newState.gamePhase = getGamePhaseFromCells(newState.cells);\r\n\r\n  return newState;\r\n}\r\n\r\ninterface GameProps {\r\n  updateGameRecord: (gameRecord: GameRecord) => void;\r\n}\r\n\r\nfunction Game({updateGameRecord}: GameProps) {\r\n  const [state, cellDispatch] = useReducer(reducer, {cells: generateCells(), gamePhase: GamePhase.apriori});\r\n  const [time , setTime ] = useState<number>  (0);\r\n\r\n  useEffect(() => {\r\n    if (state.gamePhase === GamePhase.playing) {\r\n      const interval = setInterval(() => {\r\n        setTime(Math.min(time + 1, 999));\r\n      }, 1000);\r\n      return () => clearInterval(interval);\r\n    } else if (state.gamePhase === GamePhase.apriori) {\r\n      setTime(0);\r\n    }\r\n  }, [state.gamePhase, time])\r\n\r\n  useEffect(() => {\r\n    if(state.gamePhase === GamePhase.won || state.gamePhase === GamePhase.lost){\r\n      updateGameRecord({status: state.gamePhase, time});\r\n      if(state.gamePhase === GamePhase.lost){\r\n        state.cells.map((row, rowIndex) => {\r\n          row.forEach((cell, colIndex) => {\r\n            if(cell.value==CellValue.bomb)\r\n              cellDispatch({type: ActionType.DISCOVER, i2D: [rowIndex, colIndex]})\r\n          });\r\n        })\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [state.gamePhase])\r\n\r\n  const handleCellClick = (rowParam: number, colParam: number) => (): void => {\r\n    if(state.gamePhase !== GamePhase.playing) {\r\n      cellDispatch({type: ActionType.FIRST_CLICK, i2D: [rowParam, colParam]});\r\n    } else {\r\n      const cell = state.cells[rowParam][colParam];\r\n\r\n      switch(cell.state){\r\n        case CellState.flagged:\r\n          return;\r\n        case CellState.discovered:\r\n          return;\r\n        case CellState.undiscovered:\r\n          if(cell.value === CellValue.none)\r\n            cellDispatch({type: ActionType.BFS_REVEAL, i2D: [rowParam, colParam]})\r\n          else {\r\n            cellDispatch({type: ActionType.DISCOVER, i2D: [rowParam, colParam]})\r\n          }\r\n          return;\r\n      }\r\n    }\r\n  }\r\n\r\n  const handleCellContext = (rowParam: number, colParam: number) => (e: React.MouseEvent<HTMLDivElement, MouseEvent>): void => {\r\n    e.preventDefault();\r\n    if(state.gamePhase !== GamePhase.playing) return;\r\n    const currentCell = state.cells[rowParam][colParam];\r\n\r\n    switch(currentCell.state){\r\n      case CellState.discovered:\r\n        return;\r\n      case CellState.undiscovered:\r\n        cellDispatch({type: ActionType.FLAG, i2D: [rowParam, colParam]})\r\n        break;\r\n      case CellState.flagged:\r\n        cellDispatch({type: ActionType.UNFLAG, i2D: [rowParam, colParam]})\r\n        break;\r\n    }\r\n    return;\r\n  }\r\n\r\n  const handleStatusClick = () : void => {\r\n    cellDispatch({type: ActionType.STATUS_CLICK});\r\n  }\r\n\r\n  const bombCount = () => {\r\n    return BOMB_COUNT - state.cells.reduce((acc, curr) => {\r\n      return acc + curr.reduce((acc, curr) => {\r\n        return acc + ((curr.state === CellState.flagged) ? 1 : 0);\r\n      }, 0)\r\n    }, 0)\r\n  }\r\n\r\n  const renderCells = (): React.ReactNode => {\r\n    return state.cells.map((row, rowIndex) => {\r\n      return row.map((cell, colIndex) => {\r\n        return <Button\r\n          key={`${rowIndex}-${colIndex}`}\r\n          value={cell.value}\r\n          state ={cell.state}\r\n          row={rowIndex}\r\n          col={colIndex}\r\n          onClickHandler={handleCellClick}\r\n          onContextMenuHandler={handleCellContext}\r\n        />\r\n      })\r\n    })\r\n  }\r\n\r\n  const message = () => {\r\n    switch(state.gamePhase){\r\n      case GamePhase.apriori:\r\n        return \"click any cell to begin\"\r\n      case GamePhase.playing:\r\n        return \"be careful\"\r\n      case GamePhase.lost:\r\n        return \"a terrible mistake...\"\r\n      case GamePhase.won:\r\n        return \"disaster averted, for now\"\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"Game\">\r\n      <header className=\"Header\">\r\n        <NumberDisplay displayNumber={bombCount()} />\r\n        <button className={`GamePhaseButton ${GamePhase[state.gamePhase]}`}\r\n          onClick={handleStatusClick}></button>\r\n        <NumberDisplay displayNumber={time} />\r\n      </header>\r\n      <section className=\"Body\">\r\n        {renderCells()}\r\n      </section>\r\n      <div className=\"MessageContainer\">\r\n        <span></span>\r\n        <p className=\"Message\">{message()}</p>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Game;\r\n","import React, { useState } from 'react';\r\nimport { GamePhase, GameRecord } from '../../types';\r\nimport Game from '../Game/Game';\r\nimport './App.scss';\r\n\r\nfunction App() {\r\n  const [showInstructions, setShowInstructions] = useState(false);\r\n  const [gameRecord, setGameRecord] = useState(new Array<GameRecord>());\r\n\r\n  const handleXClick = () => {\r\n    setShowInstructions(prev => !prev);\r\n  }\r\n\r\n  const handleGameRecordChange = (gameRecord: GameRecord) => {\r\n    setGameRecord(prev => [gameRecord, ...prev]);\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Game updateGameRecord={handleGameRecordChange} />\r\n      {/* <article className=\"Panel\">\r\n        <div className=\"InstructionsContainer\">\r\n        <h2>Instructions</h2>\r\n        <button className=\"ShowInstructionsToggle\" onClick={handleXClick}>{showInstructions ? \"hide\" : \"show\"}</button>\r\n        { showInstructions && \r\n          <ul className=\"instructionsList\">\r\n            <li>Left-click to reveal tile.</li>\r\n            <li>Right-click to flag tile as radioactive.</li>\r\n            <li>Numbers indicate how many radioactive sites are nearby.</li>\r\n            <li>Reveal all non-radioactive tiles to win.</li>\r\n            <li>After winning or losing, reset with the top button.</li>\r\n          </ul>\r\n        }\r\n        </div>\r\n        <div className=\"PersonalHighscoreContainer\">\r\n          <h2 className=\"PersonalHighscoresHeader\">Personal Highscores</h2>\r\n          <ul className=\"gameRecord\">\r\n            {gameRecord.map(record => {\r\n              return <li>{GamePhase[record.status]} {record.time}</li>\r\n            })}\r\n          </ul>\r\n        </div>\r\n      </article> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.scss';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}