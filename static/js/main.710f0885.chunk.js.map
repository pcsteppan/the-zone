{"version":3,"sources":["types/index.ts","components/Button/Button.tsx","images/bomb.png","images/flag.png","components/NumberDisplay/NumberDisplay.tsx","utils/index.ts","constants/index.ts","components/App/App.tsx","index.tsx"],"names":["GamePhase","CellValue","CellState","Face","ActionType","Button","row","col","value","state","onClickHandler","onContextMenuHandler","className","bomb","discovered","flagged","onClick","onContextMenu","src","alt","none","toString","undiscovered","renderContent","NumberDisplay","displayNumber","displayString","padStart","generateNeighborIndices","cellIndex","filter","index","generateCells","notBombIndex","cells","Array","fill","map","_","i","bombCount","rowIndex","Math","floor","random","colIndex","isOrIsAdjacentToUsersFirstClick","abs","cell","preSumArr","reduce","acc","curr","bfsDiscover","i2D","frontier","visited","Set","push","add","length","currI2D","pop","console","log","undefined","forEach","has","currCell","reducer","action","newCellState","type","DISCOVER","FLAG","UNFLAG","newState","gamePhase","STATUS_CLICK","playing","won","lost","apriori","INIT","FIRST_CLICK","BFS_REVEAL","allNonBombsDiscovered","anyCellDiscovered","anyBombDiscovered","getGamePhaseFromCells","App","useReducer","cellDispatch","useState","time","setTime","useEffect","interval","setInterval","min","clearInterval","handleCellClick","rowParam","colParam","handleCellContext","e","preventDefault","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sMAAYA,EAOAC,EAaAC,EAMAC,EAOAC,E,uEAjCAJ,O,qBAAAA,I,qBAAAA,I,aAAAA,I,gBAAAA,M,cAOAC,O,eAAAA,I,aAAAA,I,aAAAA,I,iBAAAA,I,eAAAA,I,eAAAA,I,aAAAA,I,iBAAAA,I,iBAAAA,I,gBAAAA,M,cAaAC,O,+BAAAA,I,2BAAAA,I,sBAAAA,M,cAMAC,K,oBAAAA,E,wBAAAA,E,oBAAAA,E,oBAAAA,M,cAOAC,O,eAAAA,I,6BAAAA,I,2BAAAA,I,uBAAAA,I,eAAAA,I,mBAAAA,I,gCAAAA,M,WCUGC,MA5Bf,YAA8F,IAA7EC,EAA4E,EAA5EA,IAAKC,EAAuE,EAAvEA,IAAKC,EAAkE,EAAlEA,MAAOC,EAA2D,EAA3DA,MAAOC,EAAoD,EAApDA,eAAgBC,EAAoC,EAApCA,qBAmBvD,OACE,qBAAKC,UAAS,iBAAYJ,IAAQP,EAAUY,KAAO,OAAS,GAA9C,YAAoDJ,IAAQP,EAAUY,WAAa,aAAeL,IAAQP,EAAUa,QAAU,UAAY,gBACtJC,QAASN,EAAeJ,EAAKC,GAC7BU,cAAeN,EAAqBL,EAAKC,GAF3C,SAnBoB,WACpB,OAAOE,GACL,KAAKP,EAAUY,WACb,GAAGN,IAAUP,EAAUY,KACrB,OAAO,qBAAKK,ICpBP,ymBDoBqBC,IAAI,6BAEzB,GAAIX,EAAQP,EAAUY,MAAQL,EAAQP,EAAUmB,KACrD,OAAO,sBAAMR,UAAWX,EAAUO,GAAOa,WAAlC,SAA+Cb,IAExD,MACF,KAAKN,EAAUa,QACb,OAAO,qBAAKG,IE3BL,qpBF2BmBC,IAAI,2BAEhC,KAAKjB,EAAUoB,eASdC,M,MGtBQC,MARf,YAA6D,IAArCC,EAAoC,EAApCA,cAClBC,EAAgBD,EAAcJ,WAAWM,SAAS,EAAG,KAIzD,OAHGF,EAAgB,IACjBC,EAAgB,MAAsB,EAAfD,GAAkBJ,WAAWM,SAAS,EAAG,MAE3D,qBAAKf,UAAU,gBAAf,SAAgCc,KCT5BE,EAA0B,SAACC,GAWtC,MAVoC,CAC9B,CAACA,EAAU,GAAG,EAAGA,EAAU,GAAG,GAC9B,CAACA,EAAU,GAAG,EAAGA,EAAU,IAC3B,CAACA,EAAU,GAAG,EAAGA,EAAU,GAAG,GAC9B,CAACA,EAAU,GAAMA,EAAU,GAAG,GAC9B,CAACA,EAAU,GAAMA,EAAU,GAAG,GAC9B,CAACA,EAAU,GAAG,EAAGA,EAAU,GAAG,GAC9B,CAACA,EAAU,GAAG,EAAGA,EAAU,IAC3B,CAACA,EAAU,GAAG,EAAGA,EAAU,GAAG,IAEbC,QAAO,SAAAC,GAAK,OAAIA,EAAM,IAAM,GAAKA,EAAM,GCfxC,GDeyDA,EAAM,IAAM,GAAKA,EAAM,GCdhF,MDiBXC,EAAgB,SAACC,GAY5B,IAXA,IAAIC,EAAQ,IAAIC,MCnBM,GDmBUC,KAAK,MAAMC,KAAI,SAAAC,GAC7C,OAAO,IAAIH,MCnBS,GDmBOC,KAAK,MAAMC,KAAI,SAACC,EAAGC,GAC5C,MAAO,CACL/B,MAAOP,EAAUmB,KACjBX,MAAOP,EAAUoB,oBAMnBkB,EC3BoB,GD4BlBA,EAAY,GAAE,CAClB,IAAMC,EAAWC,KAAKC,MC/BF,ED+BQD,KAAKE,UAC3BC,EAAWH,KAAKC,MC/BF,ED+BQD,KAAKE,UAC7BE,GAAkC,EACnCb,IACDa,EAAmCb,IAC7B,CAACQ,EAAUI,KAAcZ,GACxBS,KAAKK,IAAIN,EAASR,EAAa,KAAO,GACtCS,KAAKK,IAAIF,EAAWZ,EAAa,KAAO,IAE5CC,EAAMO,GAAUI,GAAUrC,QAAUP,EAAUY,MAAQiC,IACzDZ,EAAMO,GAAUI,GAAUrC,MAAQP,EAAUY,KAC5C2B,KAgBJ,OAZAN,EAAQA,EAAMG,KAAI,SAAC/B,EAAKmC,GACtB,OAAOnC,EAAI+B,KAAI,SAACW,EAAMH,GACpB,IAEMI,EAFcrB,EAAwB,CAACa,EAAUI,IAEZR,KAAI,SAACN,GAC9C,OAAOG,EAAMH,EAAM,IAAIA,EAAM,IAAIvB,QAAUP,EAAUY,KAAO,EAAI,KAGlE,OAAOmC,EAAKxC,QAAUP,EAAUY,KAAOmC,EAAO,CAACxC,MAAOyC,EAAUC,QAAQ,SAACC,EAAKC,GAAN,OAAgBD,EAAMC,IAAM,GAAI3C,MAAOuC,EAAKvC,aAIrHwB,EACMoB,EAAYnB,EAAOD,GAEnBC,GAIEmB,EAAc,SAACnB,EAAiBoB,GAC3C,IAAMC,EAA4B,IAAIpB,MAChCqB,EAAwB,IAAIC,IAKlC,IAHAF,EAASG,KAAKJ,GACdE,EAAQG,ICrEc,EDqEVL,EAAI,GAAcA,EAAI,IAE5BC,EAASK,OAAS,GAAE,CACxB,IAAMC,EAAUN,EAASO,MACzBC,QAAQC,IAAIH,GACZE,QAAQC,IAAIT,EAASK,aAENK,IAAZJ,GACiBjC,EAAwBiC,GAC1BK,SAAQ,SAACZ,GACnBE,EAAQW,IC/EI,ED+EAb,EAAI,GAAYA,EAAI,KAC/BpB,EAAMoB,EAAI,IAAIA,EAAI,IAAI9C,QAAUP,EAAUY,OAC3C2C,EAAQG,ICjFI,EDiFAL,EAAI,GAAYA,EAAI,IAC7BpB,EAAMoB,EAAI,IAAIA,EAAI,IAAI9C,QAAUP,EAAUmB,MAC3CmC,EAASG,KAAKJ,OAO1B,OAAOpB,EAAMG,KAAI,SAAC/B,EAAKmC,GACrB,OAAOnC,EAAI+B,KAAI,SAAC+B,EAAUvB,GACxB,OAAGW,EAAQW,IC5FO,ED4FH1B,EAAkBI,GACxB,2BAAIuB,GAAX,IAAqB3D,MAAOP,EAAUY,aAE/BsD,S,MEtFf,SAASC,EAAQ5D,EAAgD6D,GAC/D,IAAMC,EAAeD,EAAOE,OAASpE,EAAWqE,SAAWvE,EAAUY,WACpDwD,EAAOE,OAASpE,EAAWsE,KAAOxE,EAAUa,SAC5CuD,EAAOE,KAASpE,EAAWuE,OAASzE,EAAUoB,cAE3DsD,EAAW,CACb1C,MAAOzB,EAAMyB,MACb2C,UAAWpE,EAAMoE,WAGnB,OAAOP,EAAOE,MACZ,KAAKpE,EAAW0E,aACd,MAAO,CACL5C,MAAQzB,EAAMoE,YAAc7E,EAAU+E,QAAWtE,EAAMyB,MAAQF,IAC/D6C,UAAYpE,EAAMoE,YAAc7E,EAAUgF,KAAOvE,EAAMoE,YAAc7E,EAAUiF,KAAQjF,EAAUkF,QAAUlF,EAAU+E,SAEzH,KAAK3E,EAAW+E,KACd,MAAO,CACLjD,MAAOF,IACP6C,UAAW7E,EAAUkF,SAEzB,KAAK9E,EAAWgF,YACdR,EAAS1C,MAAQF,EAAcsC,EAAOhB,KACtC,MACF,KAAKlD,EAAWiF,WACdT,EAAS1C,MAAQmB,EAAY5C,EAAMyB,MAAOoC,EAAOhB,KACjD,MACF,KAAKlD,EAAWqE,SAChB,KAAKrE,EAAWsE,KAChB,KAAKtE,EAAWuE,OACdC,EAAS1C,MAAQzB,EAAMyB,MAAMG,KAAI,SAAC/B,EAAKmC,GACrC,OAAOnC,EAAI+B,KAAI,SAAC+B,EAAUvB,GACxB,OAAQyB,EAAOhB,IAAI,KAAOb,GAAY6B,EAAOhB,IAAI,KAAOT,EAAjD,YAAC,eAAgEuB,GAAjE,IAA2E3D,MAAO8D,IAAgBH,QAQjH,OAFAQ,EAASC,UFsDJ,SAA+B3C,GACpC,IAAIoD,GAAwB,EACxBC,GAAoB,EACpBC,GAAoB,EAexB,OAbAtD,EAAMgC,SAAQ,SAAC5D,GACbA,EAAI4D,SAAQ,SAAClB,GACRA,EAAKxC,QAAUP,EAAUY,MAAQmC,EAAKvC,QAAUP,EAAUY,WAC3DwE,GAAwB,EACftC,EAAKvC,QAAUP,EAAUY,aAClCyE,GAAoB,EACjBvC,EAAKxC,QAAUP,EAAUY,OAC1B2E,GAAoB,UAMzBA,EACMxF,EAAUiF,KAChBK,EACMtF,EAAUgF,IAChBO,EACMvF,EAAU+E,QACZ/E,EAAUkF,QE9EIO,CAAsBb,EAAS1C,OAE7C0C,EAqGMc,MAlGf,WAAgB,IAAD,EACiBC,qBAAWtB,EAAS,CAACnC,MAAOF,IAAiB6C,UAAW7E,EAAUkF,UADnF,mBACNzE,EADM,KACCmF,EADD,OAEaC,mBAAmB,GAFhC,mBAENC,EAFM,KAECC,EAFD,KAIbC,qBAAU,WACR,GAAIvF,EAAMoE,YAAc7E,EAAU+E,QAAS,CACzC,IAAMkB,EAAWC,aAAY,WAC3BH,EAAQrD,KAAKyD,IAAIL,EAAO,EAAG,QAC1B,KACH,OAAO,kBAAMM,cAAcH,IAClBxF,EAAMoE,YAAc7E,EAAUkF,SACvCa,EAAQ,KAET,CAACtF,EAAMoE,UAAWiB,IAErB,IAAMO,EAAkB,SAACC,EAAkBC,GAAnB,OAAwC,WAC9D,GAAG9F,EAAMoE,YAAc7E,EAAU+E,QAC/Ba,EAAa,CAACpB,KAAMpE,EAAWgF,YAAa9B,IAAK,CAACgD,EAAUC,SACvD,CACL,IAAMvD,EAAOvC,EAAMyB,MAAMoE,GAAUC,GAEnC,OAAOvD,EAAKvC,OACV,KAAKP,EAAUa,QAEf,KAAKb,EAAUY,WACb,OACF,KAAKZ,EAAUoB,aAMb,YALG0B,EAAKxC,QAAUP,EAAUmB,KAC1BwE,EAAa,CAACpB,KAAMpE,EAAWiF,WAAY/B,IAAK,CAACgD,EAAUC,KAE3DX,EAAa,CAACpB,KAAMpE,EAAWqE,SAAUnB,IAAK,CAACgD,EAAUC,UAO7DC,EAAoB,SAACF,EAAkBC,GAAnB,OAAwC,SAACE,GAEjE,GADAA,EAAEC,iBACCjG,EAAMoE,YAAc7E,EAAU+E,QAGjC,OAFoBtE,EAAMyB,MAAMoE,GAAUC,GAEvB9F,OACjB,KAAKP,EAAUY,WACb,OACF,KAAKZ,EAAUoB,aACbsE,EAAa,CAACpB,KAAMpE,EAAWsE,KAAMpB,IAAK,CAACgD,EAAUC,KACrD,MACF,KAAKrG,EAAUa,QACb6E,EAAa,CAACpB,KAAMpE,EAAWuE,OAAQrB,IAAK,CAACgD,EAAUC,QAkC7D,OACE,sBAAK3F,UAAU,MAAf,UACE,yBAAQA,UAAU,SAAlB,UACE,cAAC,EAAD,CAAea,cDzIG,GC+GFhB,EAAMyB,MAAMgB,QAAO,SAACC,EAAKC,GAC3C,OAAOD,EAAMC,EAAKF,QAAO,SAACC,EAAKC,GAC7B,OAAOD,GAAQC,EAAK3C,QAAUP,EAAUa,QAAW,EAAI,KACtD,KACF,KAuBC,wBAAQH,UAAS,0BAAqBZ,EAAUS,EAAMoE,YACpD7D,QAjCkB,WACxB4E,EAAa,CAACpB,KAAMpE,EAAW0E,kBAiC3B,cAAC,EAAD,CAAerD,cAAeqE,OAEhC,yBAASlF,UAAU,OAAnB,SAvBKH,EAAMyB,MAAMG,KAAI,SAAC/B,EAAKmC,GAC3B,OAAOnC,EAAI+B,KAAI,SAACW,EAAMH,GACpB,OAAO,cAAC,EAAD,CAELrC,MAAOwC,EAAKxC,MACZC,MAAQuC,EAAKvC,MACbH,IAAKmC,EACLlC,IAAKsC,EACLnC,eAAgB2F,EAChB1F,qBAAsB6F,GAPjB,UACG/D,EADH,YACeI,gBCvH9B8D,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.710f0885.chunk.js","sourcesContent":["export enum GamePhase {\n  apriori,\n  playing,\n  won,\n  lost,\n}\n\nexport enum CellValue {\n  none  ,\n  one   ,\n  two   ,\n  three ,\n  four  ,\n  five  ,\n  six   ,\n  seven ,\n  eight ,\n  bomb\n}\n\nexport enum CellState {\n  undiscovered,\n  discovered  ,\n  flagged\n}\n\nexport enum Face {\n  glad = 'ðŸ˜',\n  hesitant = 'ðŸ˜¶',\n  lost = 'ðŸ’€',\n  won = 'ðŸ˜Ž'\n}\n\nexport enum ActionType {\n  INIT,\n  FIRST_CLICK,\n  BFS_REVEAL,\n  DISCOVER,\n  FLAG,\n  UNFLAG,\n  STATUS_CLICK\n}\n\nexport type Action =\n  | { type: ActionType.STATUS_CLICK; }\n  | { type: ActionType.INIT; }\n  | { type: ActionType.FIRST_CLICK; i2D: Index2D }\n  | { type: ActionType.BFS_REVEAL; i2D: Index2D }\n  | { type: ActionType.DISCOVER; i2D: Index2D }\n  | { type: ActionType.FLAG; i2D: Index2D }\n  | { type: ActionType.UNFLAG; i2D: Index2D  }\n\nexport type Cell = { value: CellValue, state: CellState }\n\nexport type Index2D = [ row: number, col: number ]","import React from \"react\";\nimport { CellState, CellValue } from '../../types';\nimport flagImg from '../../images/flag.png';\nimport bombImg from '../../images/bomb.png';\nimport './Button.scss';\n\ninterface ButtonProps {\n  row: number;\n  col: number;\n  value: CellValue;\n  state: CellState;\n  onClickHandler(rowParam: number, colParam: number) : (...args: any) => void;\n  onContextMenuHandler(rowParam: number, colParam: number) : (...args: any) => void;\n}\n\nfunction Button({row, col, value, state, onClickHandler, onContextMenuHandler}: ButtonProps) {\n  const renderContent = (): React.ReactNode => {\n    switch(state) {\n      case CellState.discovered:\n        if(value === CellValue.bomb) {\n          return <img src={bombImg} alt=\"nuclear radiation symbol\"/>\n          // return <span role=\"img\" aria-label=\"bomb\">ðŸ’£</span>\n        } else if (value < CellValue.bomb && value > CellValue.none){\n          return <span className={CellValue[value].toString()}>{value}</span>\n        }\n        break;\n      case CellState.flagged:\n        return <img src={flagImg} alt=\"nuclear radiation flag\"/>\n        // return <span role=\"img\" aria-label=\"flag\">ðŸš©</span>\n      case CellState.undiscovered:\n        break;\n    }\n  }\n\n  return (\n    <div className={`Button ${value===CellValue.bomb ? \"bomb\" : \"\"} ${state===CellState.discovered ? \"discovered\" : state===CellState.flagged ? \"flagged\" : \"undiscovered\"}`}\n      onClick={onClickHandler(row, col)}\n      onContextMenu={onContextMenuHandler(row, col)}>\n      {renderContent()}\n    </div>\n  )\n}\n\nexport default Button;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAXVJREFUWIXtmUsSwiAMhkPHc+lKb6GH01voyl5MV+lgmgB50MeM/7IF+vVPSAskMOh9PX8s/VCnxytp+6g6eAGpNMBNDaMBqVqAqw16Q6JqsMWbS0GiSrDiDQp5vD8BAGC8XUKgpPEkWPaiBInywtbG42AHeqEG2UP0GVzKpVKDEqTVVc2YubOTo2s4SVVydhZ6roO1TeS4A4C9DGlgrRFCtpmja4S8hWHwFvVeaZLrfT1/fhzdgpsoysJOJu+grfc0CgFdQhOo581Lxd/zuc2ZDuZRGBDpGz7eLu4UCAs9BxI5OV2gmrB6/7im0Ef9Z5bkecb+Zr1XnFuRUUpLr4us2k3o3XUUJZWiqPD/v/XRSgC+jYZWxzwpcHq80r4cBbC5qs0/i6u4ZDY72msVKmkCtWyu9lbONINrSQFvyWlJAWrcLPRbcJZjaN52REUVcMlVyShxMq3hrGkjFxXtrNZJVMhhQw26NnlCDhtybf74hmqNA7EvghDCqoNcco4AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAAAZZJREFUWIXVmc21hCAMhcEzBdiDhbiaMqYNi7ANy3A1hdiDHcxbxYdIJH+g3tWcQeLnTcBj8E6g7+f9g99D25HmjOuy/e6n2XPvyZoAgFQ4TADNASZdaAUYiwOcveD7ef+sAWON65KFPR2sAQnKwaIDMSSkyQo8Fe8MNvknBgmyWkypeBhsw4UsofAeQ9vttj/QjpwDKXWVGjN2dnP0CidjnTl7SH08gRJUAsK9pnFOvg1xYCUPFrp6cPSKlFMYGu2mXqpMQODqztE7uAmKWZKLSRuUOsZRU+tdrtHQdv+OautIMpZTyPQSR0mAYO/woe3UJWBSo86lM2K5OFWgnLRq18KW+hqLSnMPs9SXlhloyi3LLKlXfaiS5fOY1L/GdTFxAtuKrGI/511vEqWCvHO6RgPVMU38fpr9sxx1TuYqt/4k8eGTWexoqa9QTBtoP83+bp8iYQPi0OOhlID2gSjx4/7TIfVXO4s1ychtxzCQhbDYWNsRXUy1nRU3ckHWznKdBJkcNuSgc/NMDhtC3f74JtYVB2J/63MXi1HcSCwAAAAASUVORK5CYII=\"","import React from 'react';\n\nimport \"./NumberDisplay.scss\";\n\ninterface NumberDisplayProps {\n  displayNumber: number;\n}\n\nfunction NumberDisplay({displayNumber}: NumberDisplayProps) {\n  let displayString = displayNumber.toString().padStart(3, \"0\");\n  if(displayNumber < 0){\n    displayString = \"-\" + (displayNumber*-1).toString().padStart(2, \"0\");\n  }\n  return <div className=\"NumberDisplay\">{displayString}</div>\n}\n\nexport default NumberDisplay;","import { elementRoles } from 'aria-query';\nimport {MAX_COLS, MAX_ROWS, BOMB_COUNT} from \"../constants\";\nimport {CellValue, CellState, Cell, Index2D, GamePhase} from \"../types\";\n\nexport const generateNeighborIndices = (cellIndex: Index2D) : Index2D[] => {\n  const neighborIndices : Index2D[] = [\n        [cellIndex[0]-1, cellIndex[1]-1],\n        [cellIndex[0]-1, cellIndex[1]  ],\n        [cellIndex[0]-1, cellIndex[1]+1],\n        [cellIndex[0]  , cellIndex[1]-1],\n        [cellIndex[0]  , cellIndex[1]+1],\n        [cellIndex[0]+1, cellIndex[1]-1],\n        [cellIndex[0]+1, cellIndex[1]  ],\n        [cellIndex[0]+1, cellIndex[1]+1]\n      ];\n  return neighborIndices.filter(index => index[0] >= 0 && index[0] < MAX_ROWS && index[1] >= 0 && index[1] < MAX_COLS);\n}\n\nexport const generateCells = (notBombIndex? : Index2D) : Cell[][] => {\n  let cells = new Array(MAX_ROWS).fill(null).map(_ => {\n    return new Array(MAX_COLS).fill(null).map((_, i) => {\n      return {\n        value: CellValue.none,\n        state: CellState.undiscovered\n      }\n    })\n  });\n\n  // place 10 bombs randomly, but not at or around where the user first clicks\n  let bombCount = BOMB_COUNT;\n  while(bombCount > 0){\n    const rowIndex = Math.floor(Math.random()*MAX_ROWS);\n    const colIndex = Math.floor(Math.random()*MAX_COLS);\n    let isOrIsAdjacentToUsersFirstClick = false;\n    if(notBombIndex){\n      isOrIsAdjacentToUsersFirstClick = (notBombIndex\n        && ([rowIndex, colIndex] === notBombIndex\n          || Math.abs(rowIndex-notBombIndex[0]) <= 1\n          || Math.abs(colIndex - notBombIndex[1]) <= 1))\n    }\n    if(!(cells[rowIndex][colIndex].value === CellValue.bomb || isOrIsAdjacentToUsersFirstClick)){\n      cells[rowIndex][colIndex].value = CellValue.bomb;\n      bombCount--;\n    }\n  }\n\n  cells = cells.map((row, rowIndex) => {\n    return row.map((cell, colIndex) => {\n      let neighborCells = generateNeighborIndices([rowIndex, colIndex])\n\n      const preSumArr : number[] = neighborCells.map((index) => {\n        return cells[index[0]][index[1]].value === CellValue.bomb ? 1 : 0;\n      })\n\n      return cell.value === CellValue.bomb ? cell : {value: preSumArr.reduce( (acc, curr) =>  acc + curr, 0), state: cell.state};\n    })\n  })\n\n  if(notBombIndex) {\n    return bfsDiscover(cells, notBombIndex);\n  } else {\n    return cells;\n  }\n}\n\nexport const bfsDiscover = (cells: Cell[][], i2D: Index2D): Cell[][] => {\n  const frontier : Array<Index2D> = new Array<Index2D>();\n  const visited : Set<number> = new Set<number>();\n\n  frontier.push(i2D);\n  visited.add(i2D[0]*MAX_COLS + i2D[1]);\n\n  while(frontier.length > 0){\n    const currI2D = frontier.pop();\n    console.log(currI2D);\n    console.log(frontier.length);\n    let neighborIndices : Index2D[];\n    if(currI2D !== undefined){\n      neighborIndices = generateNeighborIndices(currI2D);\n      neighborIndices.forEach((i2D: Index2D) => {\n        if(!visited.has(i2D[0]*MAX_COLS+i2D[1])){\n          if(cells[i2D[0]][i2D[1]].value !== CellValue.bomb){\n            visited.add(i2D[0]*MAX_COLS+i2D[1]);\n            if(cells[i2D[0]][i2D[1]].value === CellValue.none)\n              frontier.push(i2D);\n          }\n        }\n      })\n    }\n  }\n\n  return cells.map((row, rowIndex) => {\n    return row.map((currCell, colIndex) => {\n      if(visited.has(rowIndex*MAX_COLS+colIndex)) {\n        return {...currCell, state: CellState.discovered}\n      } else {\n        return currCell;\n      }\n    })\n  })\n}\n\nexport function getGamePhaseFromCells(cells: Cell[][]) : GamePhase {\n  let allNonBombsDiscovered = true; // -> playing : won\n  let anyCellDiscovered = false; // -> playing\n  let anyBombDiscovered = false; // -> lost\n\n  cells.forEach((row) => {\n    row.forEach((cell) => {\n      if(cell.value !== CellValue.bomb && cell.state !== CellState.discovered) {\n        allNonBombsDiscovered = false;\n      } else if (cell.state === CellState.discovered) {\n        anyCellDiscovered = true;\n        if(cell.value === CellValue.bomb) {\n          anyBombDiscovered = true;\n        }\n      }\n    })\n  })\n\n  if(anyBombDiscovered)\n    return GamePhase.lost;\n  if(allNonBombsDiscovered)\n    return GamePhase.won;\n  if(anyCellDiscovered)\n    return GamePhase.playing;\n  return GamePhase.apriori;\n}\n","export const MAX_ROWS = 9;\nexport const MAX_COLS = 9;\nexport const BOMB_COUNT = 10;","import React, {useEffect, useState, useReducer} from 'react';\nimport {Cell, CellValue, CellState, Action, ActionType, GamePhase} from \"../../types\"\n\nimport Button from '../Button/Button';\nimport NumberDisplay from '../NumberDisplay/NumberDisplay';\nimport { generateCells, bfsDiscover, getGamePhaseFromCells } from '../../utils';\n\nimport './App.scss';\nimport { BOMB_COUNT } from '../../constants';\n\nfunction reducer(state: {cells: Cell[][], gamePhase: GamePhase}, action: Action): {cells: Cell[][], gamePhase: GamePhase} {\n  const newCellState = action.type === ActionType.DISCOVER ? CellState.discovered :\n                   action.type === ActionType.FLAG ? CellState.flagged :\n                   action.type === ActionType.UNFLAG ? CellState.undiscovered : CellState.undiscovered;\n\n  let newState = {\n    cells: state.cells,\n    gamePhase: state.gamePhase\n  };\n\n  switch(action.type){\n    case ActionType.STATUS_CLICK:\n      return {\n        cells: (state.gamePhase === GamePhase.playing) ? state.cells : generateCells(),\n        gamePhase: (state.gamePhase === GamePhase.won || state.gamePhase === GamePhase.lost) ? GamePhase.apriori : GamePhase.playing\n      }\n    case ActionType.INIT:\n      return {\n        cells: generateCells(),\n        gamePhase: GamePhase.apriori\n      };\n    case ActionType.FIRST_CLICK:\n      newState.cells = generateCells(action.i2D);\n      break;\n    case ActionType.BFS_REVEAL:\n      newState.cells = bfsDiscover(state.cells, action.i2D);\n      break;\n    case ActionType.DISCOVER:\n    case ActionType.FLAG:\n    case ActionType.UNFLAG:\n      newState.cells = state.cells.map((row, rowIndex) => {\n        return row.map((currCell, colIndex) => {\n          return (action.i2D[0] === rowIndex && action.i2D[1] === colIndex) ? {...currCell, state: newCellState} : currCell;\n        })\n      })\n      break;\n  }\n\n  newState.gamePhase = getGamePhaseFromCells(newState.cells);\n\n  return newState;\n}\n\nfunction App() {\n  const [state, cellDispatch] = useReducer(reducer, {cells: generateCells(), gamePhase: GamePhase.apriori});\n  const [time , setTime ] = useState<number>  (0);\n\n  useEffect(() => {\n    if (state.gamePhase === GamePhase.playing) {\n      const interval = setInterval(() => {\n        setTime(Math.min(time + 1, 999));\n      }, 1000);\n      return () => clearInterval(interval);\n    } else if (state.gamePhase === GamePhase.apriori) {\n      setTime(0);\n    }\n  }, [state.gamePhase, time])\n\n  const handleCellClick = (rowParam: number, colParam: number) => (): void => {\n    if(state.gamePhase !== GamePhase.playing) {\n      cellDispatch({type: ActionType.FIRST_CLICK, i2D: [rowParam, colParam]});\n    } else {\n      const cell = state.cells[rowParam][colParam];\n\n      switch(cell.state){\n        case CellState.flagged:\n          return;\n        case CellState.discovered:\n          return;\n        case CellState.undiscovered:\n          if(cell.value === CellValue.none)\n            cellDispatch({type: ActionType.BFS_REVEAL, i2D: [rowParam, colParam]})\n          else {\n            cellDispatch({type: ActionType.DISCOVER, i2D: [rowParam, colParam]})\n          }\n          return;\n      }\n    }\n  }\n\n  const handleCellContext = (rowParam: number, colParam: number) => (e: React.MouseEvent<HTMLDivElement, MouseEvent>): void => {\n    e.preventDefault();\n    if(state.gamePhase !== GamePhase.playing) return;\n    const currentCell = state.cells[rowParam][colParam];\n\n    switch(currentCell.state){\n      case CellState.discovered:\n        return;\n      case CellState.undiscovered:\n        cellDispatch({type: ActionType.FLAG, i2D: [rowParam, colParam]})\n        break;\n      case CellState.flagged:\n        cellDispatch({type: ActionType.UNFLAG, i2D: [rowParam, colParam]})\n        break;\n    }\n    return;\n  }\n\n  const handleStatusClick = () : void => {\n    cellDispatch({type: ActionType.STATUS_CLICK});\n  }\n\n  const bombCount = () => {\n    return BOMB_COUNT - state.cells.reduce((acc, curr) => {\n      return acc + curr.reduce((acc, curr) => {\n        return acc + ((curr.state === CellState.flagged) ? 1 : 0);\n      }, 0)\n    }, 0)\n  }\n\n  const renderCells = (): React.ReactNode => {\n    return state.cells.map((row, rowIndex) => {\n      return row.map((cell, colIndex) => {\n        return <Button\n          key={`${rowIndex}-${colIndex}`}\n          value={cell.value}\n          state ={cell.state}\n          row={rowIndex}\n          col={colIndex}\n          onClickHandler={handleCellClick}\n          onContextMenuHandler={handleCellContext}\n        />\n      })\n    })\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"Header\">\n        <NumberDisplay displayNumber={bombCount()} />\n        <button className={`GamePhaseButton ${GamePhase[state.gamePhase]}`}\n          onClick={handleStatusClick}></button>\n        <NumberDisplay displayNumber={time} />\n      </header>\n      <section className=\"Body\">\n        {renderCells()}\n      </section>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/App/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}